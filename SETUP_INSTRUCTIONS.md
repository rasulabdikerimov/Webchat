# Инструкция по применению изменений

Для завершения интеграции регистрации, авторизации и системы сохранения сообщений, выполните следующие команды:

## 1. Создать и применить миграции базы данных

```bash
python manage.py makemigrations
python manage.py migrate
```

## 2. Создать администратора (для тестирования)

```bash
python manage.py createsuperuser
```

При создании суперпользователя установите `is_staff=True` (это происходит автоматически), чтобы пользователь видел админов в чате.

Или отметьте существующего пользователя как администратора через админ-панель:
- Перейдите на http://localhost:8000/admin/
- Зайдите в "Users"
- Отметьте "Staff status" для нужного пользователя

## 3. Запустить сервер

```bash
python manage.py runserver
```

## 4. Использование приложения

1. Перейдите на http://localhost:8000/
2. Зарегистрируйтесь или войдите
3. После входа вы будете перенаправлены на страницу чата
4. В левой боковой панели выберите администратора для начала общения
5. Введите сообщение и отправьте его

## Структура созданных файлов:

✅ **chat/models.py** - Модель Message для сохранения сообщений
✅ **chat/forms.py** - Формы регистрации и входа
✅ **chat/views.py** - Views для регистрации, входа и выхода
✅ **chat/urls.py** - Маршруты для регистрации и входа
✅ **chat/consumers.py** - WebSocket consumer с сохранением в БД
✅ **chat/admin.py** - Регистрация модели Message в админ-панели
✅ **templates/register.html** - Страница регистрации
✅ **templates/login.html** - Страница входа
✅ **templates/chat.html** - Обновленная страница чата с боковой панелью админов

## Примечания:

- Сообщения сохраняются в базе данных при отправке через WebSocket
- Только администраторы (пользователи с is_staff=True) будут отображаться в списке в левой панели
- Обычные пользователи могут отправлять сообщения администраторам
- История сообщений сохраняется в таблице chat_message
